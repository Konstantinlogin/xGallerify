window.readyForGallerify=!1,$(window).load(function(){window.readyForGallerify=!0}),$.fn.gallerify=function(e){function i(i){var t={itemsPerColumn:-1,maxHeight:500};return"default"==e.mode?(i>1600?t.itemsPerColumn=4:i>1200?t.itemsPerColumn=3:i>768?t.itemsPerColumn=2:t.itemsPerColumn=1,i>768&&(t.maxHeight=.6*screen.height)):"bootstrap"==e.mode?(i>1200?t.itemsPerColumn=4:i>992?t.itemsPerColumn=3:i>768?t.itemsPerColumn=2:t.itemsPerColumn=.4,i>768&&(t.maxHeight=.5*screen.height)):"flickr"==e.mode&&(i>1800?t.itemsPerColumn=4:i>1300?t.itemsPerColumn=3:i>610?t.itemsPerColumn=2:t.itemsPerColumn=1,i>768&&(t.maxHeight=.4*screen.height)),768>i&&(t.maxHeight=screen.height),t}function t(e,i,t){for(var n=_.reduce(e,function(e,i){return e+i.width()},0),r=(i-1-e.length*(t+4)*2)/n,o=0;o<e.length;o++)e[o].css("width",e[o].width()*r);return e[0].height()}function n(e,i){for(var t=0;t<e.length;t++){var n=i/e[t].height();e[t].width();e[t].width(e[t].width()*n)}}function r(e,i,r,o){var m=o;n(e,m);var m=t(e,i,r);return m}function o(t,n){var m=[],a=[],d=t.children(),l=n.width?n.width:t.width(),u=i(l);imagesPerRow=n.imagesPerRow?n.imagesPerRow:u.itemsPerColumn,n.margin=n.margin?n.margin:3;for(var s,g=0;g<d.length;g++){var w=$(d[g]);if(w.width()>0){if(m.push(w),w.css("margin",n.margin),m.length>=imagesPerRow||g==d.length-1){g==d.length-1;a.push(m),s=r(a[a.length-1],l,n.margin,u.maxHeight),s<u.maxHeight&&(m=[])}}else w.load(function(){o(h,e),$(this).addClass("imgloaded")})}}function m(e){for(var i=e.children(),t=0;t<i.length;t++){var n=$(i[t]);n.css("display","inline-block"),n.find("img").css("width","100%")}}function a(){!e.interruptSetup&&m(h),window.readyForGallerify?o(h,e):$(window).on("load",function(){o(h,e)}),$(window).resize(function(){o(h,e)})}var h=this;return e.interruptSetup=e.interruptSetup?e.interruptSetup:!1,e.width=e.width?e.width:void 0,e.imagesPerRow=e.imagesPerRow?e.imagesPerRow:void 0,e.margin=e.margin?e.margin:void 0,e.mode=e.mode?e.mode:"default",a(),h};