window.readyForGallerify=!1,$(window).load(function(){window.readyForGallerify=!0}),$.fn.gallerify=function(e){function i(i){var t={itemsPerColumn:-1,maxHeight:500};return"default"==e.mode?(i>1800?t.itemsPerColumn=4:i>1200?t.itemsPerColumn=3:i>768?t.itemsPerColumn=2:t.itemsPerColumn=1,i>768&&(t.maxHeight=.6*screen.height)):"bootstrap"==e.mode?(i>1200?t.itemsPerColumn=4:i>992?t.itemsPerColumn=3:i>768?t.itemsPerColumn=2:t.itemsPerColumn=.4,i>768&&(t.maxHeight=.5*screen.height)):"flickr"==e.mode&&(i>1800?t.itemsPerColumn=4:i>1300?t.itemsPerColumn=3:i>610?t.itemsPerColumn=2:t.itemsPerColumn=1,i>768&&(t.maxHeight=.4*screen.height)),768>i&&(t.maxHeight=screen.height),t}function t(e,i,t){var n=0;$(e).each(function(){n+=$(this).width()});for(var r=(i-1-e.length*(t+4)*2)/n,o=0;o<e.length;o++)e[o].css("width",e[o].width()*r);return e[0].height()}function n(e,i){for(var t=0;t<e.length;t++){var n=i/e[t].height();e[t].width();e[t].width(e[t].width()*n)}return e[0].height()}function r(e,i,r,o){var a=o;a=n(e,a);var a=t(e,i,r);return a}function o(e,i,r,o){o=n(e,o);var a=0;return $(e).each(function(){a+=$(this).width()}),a>i&&(o=t(e,i,r)),o}function a(t,n){var m=[],h=[],s=t.children(),u=n.width?n.width:t.width(),d=i(u);imagesPerRow=n.imagesPerRow?n.imagesPerRow:d.itemsPerColumn,n.margin=n.margin?n.margin:3,n.lastRow=n.lastRow?n.lastRow:"fullwidth";for(var g,w=0;w<s.length;w++){var f=$(s[w]);if(f.width()>0){if(m.push(f),f.css("margin",n.margin),m.length>=imagesPerRow||w==s.length-1){var c=w==s.length-1&&m.length<d.itemsPerColumn;h.push(m),c?"fullwidth"==n.lastRow?g=r(h[h.length-1],u,n.margin,d.maxHeight):"adjust"==n.lastRow&&o(h[h.length-1],u,n.margin,g):g=r(h[h.length-1],u,n.margin,d.maxHeight),g<d.maxHeight&&(m=[])}}else f.load(function(){a(l,e),$(this).addClass("imgloaded")})}}function m(e){for(var i=e.children(),t=0;t<i.length;t++){var n=$(i[t]);n.css("display","inline-block"),n.find("img").css("width","100%")}}function h(){!e.interruptSetup&&m(l),window.readyForGallerify?a(l,e):$(window).on("load",function(){a(l,e)}),$(window).resize(function(){a(l,e)})}var l=this;return e.interruptSetup=e.interruptSetup||!1,e.width=e.width||void 0,e.imagesPerRow=e.imagesPerRow||void 0,e.margin=e.margin||void 0,e.mode=e.mode||"default",h(),l};