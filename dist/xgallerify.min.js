window.readyForGallerify=!1,$(window).load(function(){window.readyForGallerify=!0}),$.fn.gallerify=function(e){function i(i){var n={itemsPerColumn:-1,maxHeight:500};return"default"==e.mode?(i>1600?n.itemsPerColumn=4:i>1200?n.itemsPerColumn=3:i>768?n.itemsPerColumn=2:n.itemsPerColumn=1,i>768&&(n.maxHeight=.6*screen.height)):"bootstrap"==e.mode?(i>1200?n.itemsPerColumn=4:i>992?n.itemsPerColumn=3:i>768?n.itemsPerColumn=2:n.itemsPerColumn=.4,i>768&&(n.maxHeight=.5*screen.height)):"flickr"==e.mode&&(i>1800?n.itemsPerColumn=4:i>1300?n.itemsPerColumn=3:i>610?n.itemsPerColumn=2:n.itemsPerColumn=1,i>768&&(n.maxHeight=.4*screen.height)),768>i&&(n.maxHeight=screen.height),n}function n(e,i,n){for(var t=_.reduce(e,function(e,i){return e+i.width()},0),r=(i-1-e.length*(n+4)*2)/t,o=0;o<e.length;o++)e[o].css("width",e[o].width()*r);return e[0].height()}function t(e,i){for(var n=0;n<e.length;n++){var t=i/e[n].height();e[n].width();e[n].width(e[n].width()*t)}}function r(e,i,r,o){var m=o;t(e,m);var m=n(e,i,r);return m}function o(n,t){var m=[],a=[],l=n.children(),d=t.width?t.width:n.width(),u=i(d);imagesPerRow=t.imagesPerRow?t.imagesPerRow:u.itemsPerColumn,t.margin=t.margin?t.margin:3;for(var s,g=0;g<l.length;g++){var w=$(l[g]);if(w.width()>0){if(m.push(w),w.css("margin",t.margin),m.length>=imagesPerRow||g==l.length-1){g==l.length-1;a.push(m),s=r(a[a.length-1],d,t.margin,u.maxHeight),s<u.maxHeight&&(m=[])}}else w.load(function(){o(h,e),$(this).addClass("imgloaded")})}}function m(e){for(var i=e.children(),n=0;n<i.length;n++){var t=$(i[n]);t.css("display","inline-block"),t.find("img").css("width","100%")}}function a(){!e.interruptSetup&&m(h),window.readyForGallerify?o(h,e):$(window).on("load",function(){o(h,e)}),$(window).resize(function(){o(h,e)})}var h=this;return e.interruptSetup=e.interruptSetup||!1,e.width=e.width||void 0,e.imagesPerRow=e.imagesPerRow||void 0,e.margin=e.margin||void 0,e.mode=e.mode||"default",a(),h};