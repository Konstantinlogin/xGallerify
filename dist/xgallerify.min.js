window.readyForGallerify=!1,$(window).load(function(){window.readyForGallerify=!0}),$.fn.gallerify=function(i){function e(i){breakPoints="bootstrap";var e={itemsPerColumn:-1,maxHeight:500};return(breakPoints="bootstrap")?i>1200?e.itemsPerColumn=4:i>992?e.itemsPerColumn=3:i>768?e.itemsPerColumn=2:e.itemsPerColumn=1:"flickr"==breakPoints&&(i>1800?e.itemsPerColumn=4:i>1300?e.itemsPerColumn=3:i>610?e.itemsPerColumn=2:e.itemsPerColumn=1),i>768?e.maxHeight=.3*screen.height:e.maxHeight=screen.height,e}function r(i,e,r){for(var n=_.reduce(i,function(i,e){return i+e.width()},0),t=(e-1-i.length*(r+4)*2)/n,o=0;o<i.length;o++)i[o].css("width",i[o].width()*t);return i[0].height()}function n(i,e){for(var r=0;r<i.length;r++){var n=e/i[r].height();i[r].width();i[r].width(i[r].width()*n)}}function t(i,e,t,o){var a=o;n(i,a);var a=r(i,e,t);return a}function o(r,n){var a=[],m=[],s=r.children(),l=n.width?n.width:r.width(),u=e(l);imagesPerRow=n.imagesPerRow?n.imagesPerRow:u.itemsPerColumn,n.margin=n.margin?n.margin:3;for(var d,g=0;g<s.length;g++){var w=$(s[g]);if(w.width()>0){if(a.push(w),w.css("margin",n.margin),a.length>=imagesPerRow||g==s.length-1){g==s.length-1;m.push(a),d=t(m[m.length-1],l,n.margin,u.maxHeight),d<u.maxHeight&&(a=[])}}else w.load(function(){o(h,i),$(this).addClass("imgloaded")})}}function a(i){for(var e=i.children(),r=0;r<e.length;r++){var n=$(e[r]);n.css("display","inline-block"),n.find("img").css("width","100%")}}function m(){!i.interruptSetup&&a(h),window.readyForGallerify?o(h,i):$(window).on("load",function(){o(h,i)}),$(window).resize(function(){o(h,i)})}var h=this;return i.interruptSetup=i.interruptSetup?i.interruptSetup:!1,i.width=i.width?i.width:void 0,i.imagesPerRow=i.imagesPerRow?i.imagesPerRow:void 0,i.margin=i.margin?i.margin:void 0,m(),h};