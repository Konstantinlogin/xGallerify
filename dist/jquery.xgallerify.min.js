!function(e){var i=!1;e(window).load(function(){i=!0}),e.fn.gallerify=function(t){function r(e){var i={itemsPerRow:void 0,maxHeight:void 0};return 768>=e&&(i.maxHeight=screen.height),"bootstrap"==t.mode?(e>1200?i.itemsPerRow=4:e>992?i.itemsPerRow=3:e>768?i.itemsPerRow=2:i.itemsPerRow=.4,e>768&&(i.maxHeight=.5*screen.height)):"flickr"==t.mode?(e>1800?i.itemsPerRow=4:e>1300?i.itemsPerRow=3:e>610?i.itemsPerRow=2:i.itemsPerRow=1,e>768&&(i.maxHeight=.4*screen.height)):"small"==t.mode?(e>1800?i.itemsPerRow=14:e>1300?i.itemsPerRow=10:e>610?i.itemsPerRow=6:i.itemsPerRow=4,e>768&&(i.maxHeight=.4*screen.height)):(e>1800?i.itemsPerRow=4:e>1200?i.itemsPerRow=3:e>768?i.itemsPerRow=2:i.itemsPerRow=1,e>768&&(i.maxHeight=.6*screen.height)),i}function n(i,t,r){var n=0;e(i).each(function(){n+=e(this).width()});for(var o=(t-i.length*(r+2)*2)/n,h=0;h<i.length;h++)i[h].css("width",i[h].width()*o);return i[0].height()}function o(e,i){for(var t=0;t<e.length;t++){var r=i/e[t].height();e[t].width();e[t].width(e[t].width()*r)}return e[0].height()}function h(e,i,t,r){return o(e,r),n(e,i,t)}function s(i,t,r,h){h=o(i,h);var s=0;return e(i).each(function(){s+=e(this).width()}),s>t&&(h=n(i,t,r)),h}function w(i,n){var o=[],a=[],m=i.children(),g=n.width||i.width(),l=r(g);imagesPerRow=n.imagesPerRow||l.itemsPerRow,n.margin=void 0!=n.margin&&null!=n.margin?n.margin:5,n.lastRow=n.lastRow||"fullwidth";var u;n.width&&i.width(g);for(var c=0;c<m.length;c++){var R=e(m[c]);R.width()>0?(o.push(R),(o.length>=imagesPerRow||c==m.length-1)&&(a.push(o),c==m.length-1&&o.length<l.itemsPerRow&&"fullwidth"!=n.lastRow?s(a[a.length-1],g,n.margin,u):u=h(a[a.length-1],g,n.margin,l.maxHeight),u<l.maxHeight&&(o=[]))):R.load(function(){w(d,t)})}}function a(i,t){jChildren=e(i.children()),jChildren.css("display","inline-block"),jChildren.css("margin",_params.margin),jChildren.find("img").css("width","100%")}function m(){!t.interruptSetup&&a(d),i?w(d,t):e(window).on("load",function(){w(d,t)}),e(window).resize(function(){w(d,t)})}var d=this;return t.mode=t.mode||"default",t.interruptSetup=t.interruptSetup||!1,t.width=t.width||void 0,t.imagesPerRow=t.imagesPerRow||void 0,m(),d}}(jQuery);